<article
  class="event-card"
  [class.event-card--cancelled]="cultureEvent().status === 'cancelled'"
>
  <div class="event-card__image">
    <img
      [src]="cultureEvent().imageUrl"
      [alt]="cultureEvent().title"
      loading="lazy"
    />

    <span class="event-card__category">
      {{ getCategoryLabel(cultureEvent().category) }}
    </span>

    <button
      class="event-card__favorite"
      [class.event-card__favorite--active]="isFavorite()"
      (click)="onFavoriteClick($event)"
      [attr.aria-label]="
        isFavorite()
          ? 'Remove from favorites'
          : 'Add to favorites'
      "
    >
      {{ isFavorite() ? 'â˜…' : 'â˜†' }}
    </button>
  </div>

  <div class="event-card__content">
    <div class="event-card__meta">
      <span
        class="event-card__status"
        [attr.data-status]="cultureEvent().status"
      >
        {{ getStatusLabel(cultureEvent().status) }}
      </span>

      <span class="event-card__date">
        {{ formattedDate(cultureEvent().date) }}
      </span>
    </div>

    <h3 class="event-card__title">
      <a [routerLink]="['/events', cultureEvent().id]">
        {{ cultureEvent().title }}
      </a>
    </h3>

    <p class="event-card__venue">ğŸ“ {{ cultureEvent().venue }}</p>

    <p class="event-card__description">
      {{ cultureEvent().description }}
    </p>

    <div class="event-card__footer">
      <span class="event-card__price">
        â‚¬{{ cultureEvent().ticketPrice }}
      </span>

      @if (cultureEvent().availableSeats > 0) {
        <span class="event-card__seats">
          {{ cultureEvent().availableSeats }} seats left
        </span>
      } @else {
        <span class="event-card__seats event-card__seats--sold-out">
          Sold out
        </span>
      }
    </div>
  </div>

  <div class="event-card__actions">
    <button
      class="btn btn--secondary btn--sm"
      (click)="onEdit.emit(cultureEvent())"
    >
      Edit
    </button>

    <button
      class="btn btn--ghost btn--sm"
      (click)="onToggleStatus.emit(cultureEvent())"
    >
      {{ cultureEvent().status === 'published' ? 'Unpublish' : 'Publish' }}
    </button>

    <button
      class="btn btn--danger btn--sm"
      (click)="onDelete.emit(cultureEvent())"
    >
      Delete
    </button>
  </div>
</article>
